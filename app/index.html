<!doctype html>
<html ng-app="primate">
<head>
    <meta charset="utf-8">
    <title>Primate</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="bower_components/angular/angular.js"></script>
	<script src="js/libpwsafejs/jDataView/jquery/jquery-1.7.1-binary-ajax.js"></script>
	<script src="js/libpwsafejs/jDataView/src/jdataview.js"></script>
	<script src="js/libpwsafejs/jDataView/src/jdataview-jquery-converter.js"></script>
	<script src="js/libpwsafejs/crypto-sha256-hmac.js"></script>
	<script src="js/libpwsafejs/twofish.js"></script>
	<script src="js/libpwsafejs/pwsafedb.js"></script>
	<script src="bower_components/zxcvbn/zxcvbn.js"></script>
	<script src="js/app.js"></script>
	<script src="js/factories.js"></script>
	<script src="js/services.js"></script>
	<script src="js/filters.js"></script>
	<script src="js/controllers.js"></script>
</head>
<body ng-controller="StateController">
    <h1>Primate Password Manager</h1>

	<div ng-controller="FilePicker" ng-if="state == 'unloaded'">
		<p>Open Password Database File</p>
		<input type="file" value="Open Password Database" id="fileInput">
		<input type="button" value="New Database">
		<p>Password: <input type="password" ng-model="pass"></p>
		<input type="button" value="Open" ng-click="open()">
		<p ng-show="invalidFile">Invalid Password Database</p>
	</div>

	<div ng-if="viewing" id="viewBox">
		<p>{{currentRecord.title}}</p>
		
		<input type="button" value="Close" ng-click="closeView()">
	</div>
	
	<div ng-if="state == 'loaded'">
		<input type="button" ng-click="closeDb()" value="Close Database">

		<h4>Accounts</h4>
		<table>
			<tr>
				<th>Name</th>
				<th>Password</th>
				<th>Strength</th>
				<th>Show?</th>
			</tr>
			<tr ng-repeat="record in records">
				<td><a href="" ng-click="viewRecord(record.uuid)">{{record.title}}</a></td>
				<td ng-switch on="showPw">
					<span ng-switch-when="true">{{record.password}}</span>
					<span ng-switch-default>{{record.password | hash}}</span>
				</td>
				<td>{{record.password | passwordStrengthScore}}</td>
				<td><input type="checkbox" ng-model="showPw"></td>
			</tr>
		</table>
	</div>


</body>
</html>
